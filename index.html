<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>South 1 App Adoption</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
body {
Â  Â  font-family: 'Inter', sans-serif;
Â  Â  /* Tailwind classes used on body for background/color, but keeping Inter font */
}
.full-bleed-container {
Â  Â  padding: 0 !important;
Â  Â  margin: 0 !important;
}
.container {
Â  Â  max-width: 1000px;
Â  Â  margin: 0 auto;
Â  Â  padding: 1rem;
}
.section {
Â  Â  background-color: white;
Â  Â  padding: 1.5rem;
Â  Â  border-radius: 1rem;
Â  Â  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
Â  Â  margin-bottom: 1.5rem; /* Increased margin for better separation */
}
.progress-bar-container {
Â  Â  width: 100%;
Â  Â  background-color: #e5e7eb;
Â  Â  border-radius: 9999px;
Â  Â  overflow: hidden;
Â  Â  height: 1.5rem; /* 24px */
}
.progress-bar {
Â  Â  height: 100%;
Â  Â  transition: width 0.5s ease-in-out;
Â  Â  text-align: right;
Â  Â  padding-right: 0.5rem;
Â  Â  font-weight: 600;
Â  Â  color: white;
Â  Â  white-space: nowrap;
Â  Â  display: flex;
Â  Â  align-items: center;
Â  Â  justify-content: flex-end;
Â  Â  font-size: 0.875rem;
}
/* Adjusted grid for daily cards to look good on mobile */
.daily-grid {
Â  Â  display: grid;
Â  Â  gap: 0.75rem;
Â  Â  grid-template-columns: repeat(2, minmax(0, 1fr));
}
@media (min-width: 640px) {
Â  Â  .daily-grid {
Â  Â  Â  Â  grid-template-columns: repeat(4, minmax(0, 1fr));
Â  Â  }
}
@media (min-width: 1024px) {
Â  Â  .daily-grid {
Â  Â  Â  Â  grid-template-columns: repeat(7, minmax(0, 1fr));
Â  Â  }
}
.daily-card {
Â  Â  padding: 0.75rem;
}
</style>
</head>
<body class="bg-gray-100 text-gray-800 p-4 sm:p-8">
<div class="full-bleed-container">
<div class="container">
Â  Â  Â  Â  <header class="text-center mb-8 sm:mb-12">
Â  Â  Â  Â  <h1 class="text-3xl sm:text-5xl font-bold text-blue-800 mb-6">South 1 App Adoption</h1>
Â  Â  Â  Â  <p class="mt-4 text-sm sm:text-base text-gray-600 max-w-2xl mx-auto">
Â  Â  Â  Â  Â  Â  New customers represent our biggest opportunity to grow our active customer base. This infographic focuses on the key trend data, ensuring we maximise our efforts, especially with new customers, as recent figures show new customers who download the app are retained more than twice as often laying the foundation for future growth and success.
Â  Â  Â  Â  </p>
Â  Â  </header>

Â  Â  Â  Â  <div class="section bg-yellow-100 border-l-4 border-yellow-500 mb-8">
Â  Â  Â  Â  <h3 class="text-xl sm:text-2xl font-bold text-yellow-800 text-center mb-4">LIVE<br>App Exclusive Offers</h3>
Â  Â  Â  Â  <div class="md:flex md:space-x-4 space-y-4 md:space-y-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-1 text-center bg-yellow-50 p-4 rounded-lg border border-yellow-300 shadow-md">
Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="text-lg font-bold text-yellow-900 mb-2">New Customers</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xl font-extrabold text-yellow-900">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="new-customer-offer-text">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  App Â£5 sign up - NC ONLY
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-2 text-sm text-yellow-700 font-semibold text-left mx-auto max-w-xs">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold text-center">Terms</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul class="list-disc ml-4 mt-2 space-y-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>Only available to customers on their first in-store purchase</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>Minimum spend of Â£10 (before the Â£5 is removed)</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>Must download the app in-store and prove that they have it</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>Use code 'App Â£5 sign up - NC ONLY' when applying the Â£5 discount.</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-1 text-center bg-yellow-50 p-4 rounded-lg border border-yellow-300 shadow-md">
Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="text-lg font-bold text-yellow-900 mb-2">Current Offer: 25% Trade-in</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xl font-extrabold text-yellow-900">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="existing-customer-offer-text">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Trade in your old e-cig and receive 25% off a brand new one!
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-2 text-sm text-yellow-700 font-semibold text-left mx-auto max-w-xs">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="font-bold mb-2">Details</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul class="list-disc ml-4 mt-2 space-y-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>Valid until Sunday 26th October.</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>We'll even recycle your old kit.</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>Use code â€˜Trade-in' when providing the discount.</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>Further discounts **cannot** be used in conjunction with this offer.</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="section bg-red-100 border-l-4 border-red-500">
Â  Â  Â  Â  <h3 class="text-lg sm:text-xl font-bold text-red-800 text-center">Expectation</h3>
Â  Â  Â  Â  <p class="mt-2 text-sm sm:text-base text-red-700 max-w-2xl mx-auto text-center font-semibold">
Â  Â  Â  Â  Â  Â  While every store has the potential for a turbulent day, there is no reason for any store to be trending in the 40%s at this stage. Our expectation is for all stores to take immediate action to shift the dial with action steps being communicated through Yoobic briefings
Â  Â  Â  Â  </p>
Â  Â  </div>

Â  Â  Â  Â  <div class="section">
Â  Â  Â  Â  <h3 class="text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center">Area Performance Summary</h3>
Â  Â  Â  Â  <p class="text-sm sm:text-base text-center text-gray-600 mb-8">
Â  Â  Â  Â  Â  Â  This summarises the performance across all stores, highlighting overall area success and opportunities for improvement.
Â  Â  Â  Â  </p>
Â  Â  Â  Â  <div id="area-summary-container" class="space-y-6 max-w-2xl mx-auto">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="section">
Â  Â  Â  Â  <h3 class="text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center">Where We Stand: Store Performance Overview (WTD & NCA)</h3>
Â  Â  Â  Â  <p class="text-sm sm:text-base text-center text-gray-600 mb-8">
Â  Â  Â  Â  Â  Â  This view shows the Week-to-Date performance for **Overall App Adoption** and **New Customer Adoption (NCA)**, followed by the daily breakdown.
Â  Â  Â  Â  </p>
Â  Â  Â  Â  <div id="wtd-container" class="space-y-4 sm:space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  Â  Â  <div class="section">
Â  Â  Â  Â  <h3 class="text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center">Team Member Trends: High-Fliers and Areas for Focus</h3>
Â  Â  Â  Â  <p class="text-sm sm:text-base text-center text-gray-600 mb-8">
Â  Â  Â  Â  Â  Â  This data helps to identify consistent performers to learn from, as well as team members who may need support with delivery or consistency.
Â  Â  Â  Â  </p>
Â  Â  Â  Â  <div id="team-member-trends" class="space-y-4 sm:space-y-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  Â  Â  <div class="section bg-blue-100 border-l-4 border-blue-500">
Â  Â  Â  Â  <h3 class="text-lg sm:text-xl font-bold text-blue-800 text-center">Which Side of the Coin Are You On?</h3>
Â  Â  Â  Â  <p class="mt-2 text-sm sm:text-base text-blue-700 max-w-2xl mx-auto text-center font-semibold">
Â  Â  Â  Â  Â  Â  Ultimately, your individual effort is either positively affecting the store, cluster, and area performance or dragging it down. This detail should help you identify which side of the coin you are currently placed on.
Â  Â  Â  Â  </p>
Â  Â  </div>
</div>
<script>
// Data Structure: 'daily' contains 'wtd' (overall adoption)
// Data has been UPDATED with the new week's adoption details
const allStoresData = {
Â  Â  "Bristol": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.837, ncr: 0.78, tm: "Paul T / Mike" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.667, ncr: 0.2, tm: "Mike / Taryn" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.824, ncr: 0.6, tm: "Paul T / Taryn" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.768, ncr: 0.778, tm: "Paul T / Mike" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.725, ncr: 0.4, tm: "Mike / Taryn" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.674, ncr: 0.222, tm: "Mike / Josh B" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Josh B" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Gloucester": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.5, ncr: 0.0, tm: "Dan W / Dan F" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.615, ncr: 1.0, tm: "Dan F" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.55, ncr: 1.0, tm: "Dan W / Dan F" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.65, ncr: null, tm: "Dan F" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.45, ncr: null, tm: "Dan W / Dan F" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.6, ncr: 0.5, tm: "Dan W" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Dan W" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Nottingham": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.714, ncr: null, tm: "Eve" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.591, ncr: 0.0, tm: "Nicole" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.813, ncr: 0.333, tm: "Tyler" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.571, ncr: 0.0, tm: "Eve / Tyler" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.571, ncr: 0.0, tm: "Eve / Nicole" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.647, ncr: 0.0, tm: "Eve" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Eve" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Rugby": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.522, ncr: null, tm: "Raf" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.722, ncr: 1.0, tm: "Raf" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.7, ncr: 0.0, tm: "Jenna" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.4, ncr: 1.0, tm: "Raf / Jenna" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.857, ncr: null, tm: "Jenna" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.667, ncr: 1.0, tm: "Raf" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Null" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Barnstaple": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.593, ncr: 1.0, tm: "Shannon / Matt" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.667, ncr: 1.0, tm: "Simonas" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.455, ncr: null, tm: "Simonas" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.481, ncr: 0.667, tm: "Simonas" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.45, ncr: null, tm: "Simonas / Matt" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.667, ncr: null, tm: "Matt" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Matt" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Exeter": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.545, ncr: 0.75, tm: "Ash / Zoe" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.677, ncr: 1.0, tm: "Zoe" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.796, ncr: 0.875, tm: "Shannon / Ash" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.447, ncr: 0.667, tm: "Shannon / Ash" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.761, ncr: 0.714, tm: "Shannon / Ash" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.622, ncr: 0.7, tm: "Shannon / Zoe" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Zoe" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Birmingham": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.278, ncr: 1.0, tm: "Danni" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.55, ncr: 0.5, tm: "Danni" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.5, ncr: null, tm: "Danni" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.375, ncr: 0.5, tm: "Danni" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.467, ncr: 0.0, tm: "Deion" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.333, ncr: 0.0, tm: "Deion" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Null" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Tyburn": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.636, ncr: null, tm: "Mike B" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.313, ncr: null, tm: "Mike B" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.2, ncr: 0.0, tm: "Mike B" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.375, ncr: null, tm: "Mike B" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.182, ncr: 0.0, tm: "Mike B" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.357, ncr: null, tm: "Danni" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Deion" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Chapel Ash": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.609, ncr: null, tm: "Josh T" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.667, ncr: 0.0, tm: "Josh T" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.778, ncr: null, tm: "Josh T" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.609, ncr: null, tm: "Josh T" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.563, ncr: null, tm: "Jess / Josh T" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.8, ncr: null, tm: "Jess" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Jess" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Penn Road": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.667, ncr: null, tm: "Reece" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.5, ncr: null, tm: "Jess" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.429, ncr: 0.0, tm: "Gaynor" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.545, ncr: 0.0, tm: "Gaynor" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.692, ncr: null, tm: "Gaynor / Reece" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.8, ncr: 0.0, tm: "Reece" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Null" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Bridgend": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.706, ncr: 0.0, tm: "Lucy / Tomos" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.448, ncr: 0.5, tm: "Trudy" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.704, ncr: 1.0, tm: "Trudy" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.56, ncr: 0.0, tm: "Lucy / Tomos" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.576, ncr: null, tm: "Tomos" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.575, ncr: 0.5, tm: "Trudy" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Trudy" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Merthyr": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.714, ncr: 0.0, tm: "James D" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.583, ncr: 0.0, tm: "Lauren" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.519, ncr: 0.0, tm: "James D" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.727, ncr: 1.0, tm: "James D" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.769, ncr: null, tm: "Lucy" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.757, ncr: 0.0, tm: "Lucy / Lauren" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Lauren" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Rumney": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.368, ncr: 0.0, tm: "Ross" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.5, ncr: null, tm: "Lucy / Harmony" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.686, ncr: null, tm: "Ross" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.361, ncr: 0.0, tm: "Ross" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.585, ncr: 0.0, tm: "James D / Harmony" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.415, ncr: 1.0, tm: "James D" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Ross" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Madeley": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.825, ncr: 1.0, tm: "Rach" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.737, ncr: 0.0, tm: "Gaynor" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.742, ncr: 0.333, tm: "Paul P" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.868, ncr: 1.0, tm: "Rach / Paul P" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.821, ncr: 1.0, tm: "Rach / Paul P" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.78, ncr: 1.0, tm: "Rach" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Rach" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Shrewsbury": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.583, ncr: 0.0, tm: "Liviu / Paul P" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.75, ncr: null, tm: "Paul P" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.758, ncr: 1.0, tm: "Rach" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.714, ncr: 0.5, tm: "Liviu" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.68, ncr: 1.0, tm: "Liviu" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.711, ncr: 0.2, tm: "Liviu" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Null" }
Â  Â  Â  Â  ]
Â  Â  },
Â  Â  "Wellington": {
Â  Â  Â  Â  daily: [
Â  Â  Â  Â  Â  Â  { day: "Mon", wtd: 0.7, ncr: 0.5, tm: "Ryen" },
Â  Â  Â  Â  Â  Â  { day: "Tue", wtd: 0.64, ncr: 0.5, tm: "Ryen" },
Â  Â  Â  Â  Â  Â  { day: "Wed", wtd: 0.647, ncr: null, tm: "Andy" },
Â  Â  Â  Â  Â  Â  { day: "Thu", wtd: 0.875, ncr: 0.0, tm: "Andy" },
Â  Â  Â  Â  Â  Â  { day: "Fri", wtd: 0.65, ncr: 0.5, tm: "Andy / Ryen" },
Â  Â  Â  Â  Â  Â  { day: "Sat", wtd: 0.711, ncr: 0.667, tm: "Ryen" },
Â  Â  Â  Â  Â  Â  { day: "Sun", wtd: null, ncr: null, tm: "Null" }
Â  Â  Â  Â  ]
Â  Â  }
};

const wtdContainer = document.getElementById('wtd-container');
const teamMemberTrendsContainer = document.getElementById('team-member-trends');
const areaSummaryContainer = document.getElementById('area-summary-container');

// --- AREA SUMMARY CALCULATIONS & DISPLAY ---
const storeKeys = Object.keys(allStoresData);
let totalWtdSum = 0;
let totalWtdDailyCount = 0;
let totalNcrDailySum = 0;
let totalNcrDailyCount = 0;

// Calculate Area WTD and NCA WTD averages across all available daily data
storeKeys.forEach(key => {
Â  Â  allStoresData[key].daily.forEach(day => {
Â  Â  Â  Â  if (day.wtd !== null) {
Â  Â  Â  Â  Â  Â  totalWtdSum += day.wtd;
Â  Â  Â  Â  Â  Â  totalWtdDailyCount += 1;
Â  Â  Â  Â  }
Â  Â  Â  Â  if (day.ncr !== null) {
Â  Â  Â  Â  Â  Â  totalNcrDailySum += day.ncr;
Â  Â  Â  Â  Â  Â  totalNcrDailyCount += 1;
Â  Â  Â  Â  }
Â  Â  });
});

const areaWtdAvg = totalWtdDailyCount > 0 ? totalWtdSum / totalWtdDailyCount : 0;
const areaNcrAvg = totalNcrDailyCount > 0 ? totalNcrDailySum / totalNcrDailyCount : 0;

// Helper function for Area Summary bar HTML
function generateSummaryBar(title, value, colorClass, highlightThreshold) {
Â  Â  const percentage = (value * 100).toFixed(1);
Â  Â  const isHigh = value >= highlightThreshold;
Â  Â  const barColor = isHigh ? colorClass : 'bg-gray-400';
Â  Â  const textColor = isHigh ? colorClass.replace('bg-', 'text-') : 'text-gray-700';

Â  Â  return `
Â  Â  Â  Â  <div class="mb-4">
Â  Â  Â  Â  Â  Â  <p class="text-md font-semibold text-gray-700 mb-2 flex justify-between items-center">
Â  Â  Â  Â  Â  Â  Â  Â  <span>${title}</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold text-xl ${textColor}">${percentage}%</span>
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  <div class="progress-bar-container">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="progress-bar ${barColor}" style="width: ${Math.min(parseFloat(percentage), 100)}%;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${percentage}%
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  `;
}

const areaSummaryHTML = `
Â  Â  ${generateSummaryBar("Area App Adoption Rate (WTD)", areaWtdAvg, "bg-green-500", 0.50)}
Â  Â  ${generateSummaryBar("Area New Customer Adoption Rate (NCA)", areaNcrAvg, "bg-purple-500", 0.70)}
`;
areaSummaryContainer.innerHTML = areaSummaryHTML;

// ---------------------------------------------
// 1. WTD Performance Section
// Helper function to calculate WTD averages for a single store
function calculateStoreAverages(storeData) {
Â  Â  let totalWtd = 0;
Â  Â  let countWtd = 0;
Â  Â  let totalNca = 0;
Â  Â  let countNca = 0;

Â  Â  storeData.daily.forEach(day => {
Â  Â  Â  Â  if (day.wtd !== null) {
Â  Â  Â  Â  Â  Â  totalWtd += day.wtd;
Â  Â  Â  Â  Â  Â  countWtd += 1;
Â  Â  Â  Â  }
Â  Â  Â  Â  if (day.ncr !== null) {
Â  Â  Â  Â  Â  Â  totalNca += day.ncr;
Â  Â  Â  Â  Â  Â  countNca += 1;
Â  Â  Â  Â  }
Â  Â  });

Â  Â  return {
Â  Â  Â  Â  wtdAvg: countWtd > 0 ? totalWtd / countWtd : 0,
Â  Â  Â  Â  ncaAvg: countNca > 0 ? totalNca / countNca : 0,
Â  Â  };
}

// 1. Sort stores based on the calculated WTD average (Overall Adoption)
const sortedStores = Object.entries(allStoresData).map(([name, data]) => {
Â  Â  const averages = calculateStoreAverages(data);
Â  Â  return {
Â  Â  Â  Â  storeName: name,
Â  Â  Â  Â  ...data,
Â  Â  Â  Â  ...averages,
Â  Â  };
}).sort((a, b) => b.wtdAvg - a.wtdAvg);

// Clear the container before populating
wtdContainer.innerHTML = '';

sortedStores.forEach(store => {
Â  Â  const { storeName, wtdAvg, ncaAvg, daily } = store;
Â  Â  const wtdPercentage = (wtdAvg * 100).toFixed(1);
Â  Â  const ncaPercentage = (ncaAvg * 100).toFixed(1);

Â  Â  // Styling for Overall WTD Bar
Â  Â  const isWtdStruggling = wtdAvg < 0.5;
Â  Â  const wtdBarColor = isWtdStruggling ? 'bg-red-500' : 'bg-green-500';
Â  Â  const wtdCardColor = isWtdStruggling ? 'border-red-500' : 'border-green-500';

Â  Â  // Styling for NCA WTD Bar (70% target)
Â  Â  const isNcaHigh = ncaAvg >= 0.70;
Â  Â  const ncaBarColor = isNcaHigh ? 'bg-purple-500' : 'bg-gray-400';

Â  Â  // Generate HTML for the combined daily cards
Â  Â  const dailyDataHTML = daily.map(dayData => {
Â  Â  Â  Â  const wtdValue = dayData.wtd;
Â  Â  Â  Â  const ncrValue = dayData.ncr;
Â  Â  Â  Â  const tm = dayData.tm || 'N/A';

Â  Â  Â  Â  if (wtdValue === null && ncrValue === null) {
Â  Â  Â  Â  Â  Â  // Scenario 1: Day not worked / Future day
Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-white daily-card rounded-lg shadow-sm text-center border border-gray-200">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm font-semibold text-gray-500 mb-2">${dayData.day}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-base text-gray-400 font-bold">N/A</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-gray-500 mt-2">${tm}</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  }

Â  Â  Â  Â  // WTD styling (NO LABEL)
Â  Â  Â  Â  const wtdPercent = wtdValue !== null ? (wtdValue * 100).toFixed(1) : 'N/A';
Â  Â  Â  Â  const wtdClass = wtdValue !== null && wtdValue < 0.5 ? 'text-red-600' : (wtdValue !== null ? 'text-green-600' : 'text-gray-400');

Â  Â  Â  Â  // NCA styling (70% threshold, uses NCA label)
Â  Â  Â  Â  const ncaPercent = ncrValue !== null ? (ncrValue * 100).toFixed(1) : 'N/A';
Â  Â  Â  Â  // Note: NCA is greyed out if data is N/A or below target. Purple is used for 70%+
Â  Â  Â  Â  const ncaClass = ncrValue !== null && ncrValue >= 0.70 ? 'text-purple-600' : 'text-gray-500';

Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  <div class="bg-white daily-card rounded-lg shadow-sm text-center border border-gray-200">
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm font-semibold text-gray-500 mb-1">${dayData.day}</p>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="space-y-1 mt-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-base font-bold ${wtdClass}">${wtdPercent}%</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-base font-bold ${ncaClass}">${ncaPercent}% <span class="text-xs font-normal text-gray-500">NCA</span></p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-gray-500 mt-2">${tm}</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  }).join('');

Â  Â  const storeHTML = `
Â  Â  Â  Â  <div class="section border-l-4 ${wtdCardColor}">
Â  Â  Â  Â  Â  Â  <div class="flex items-start space-x-4 flex-wrap">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-shrink-0 w-full sm:w-48 text-left sm:text-right mb-2 sm:mb-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex flex-col space-y-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="h-6 flex items-center justify-start sm:justify-end w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xl font-bold text-gray-900">${storeName}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="h-6 flex items-center justify-start sm:justify-end w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm font-medium text-gray-700">NCA</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-1 w-full sm:w-auto space-y-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="progress-bar-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="progress-bar ${wtdBarColor}" style="width: ${Math.min(parseFloat(wtdPercentage), 100)}%;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${wtdPercentage}%
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="w-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="progress-bar-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="progress-bar ${ncaBarColor}" style="width: ${Math.min(parseFloat(ncaPercentage), 100)}%;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${ncaPercentage}%
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="mt-8">
Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="text-lg sm:text-xl font-semibold text-gray-700 mb-4 text-center">Daily Performance (Overall / NCA)</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="daily-grid">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${dailyDataHTML}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  `;
Â  Â  wtdContainer.innerHTML += storeHTML;
});


// 3. Team Member Trends Section
const teamMembers = {};
Object.values(allStoresData).forEach(store => {
Â  Â  store.daily.forEach(day => {
Â  Â  Â  Â  // Only process days with team member data and WTD data
Â  Â  Â  Â  if (day.tm && day.tm.toUpperCase() !== 'DNT' && day.wtd !== null) {
Â  Â  Â  Â  Â  Â  const tms = day.tm.split('/').map(t => t.trim());
Â  Â  Â  Â  Â  Â  tms.forEach(tm => {
Â  Â  Â  Â  Â  Â  Â  Â  if (!teamMembers[tm]) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  teamMembers[tm] = {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  totalPercent: 0,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dayCount: 0,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  highDays: 0,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lowDays: 0,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  hasData: true,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ncrTotal: 0,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ncrDayCount: 0
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  // WTD Tracking (credited fully to each team member listed)
Â  Â  Â  Â  Â  Â  Â  Â  teamMembers[tm].totalPercent += day.wtd;
Â  Â  Â  Â  Â  Â  Â  Â  teamMembers[tm].dayCount += 1;

Â  Â  Â  Â  Â  Â  Â  Â  // NCA Tracking: ONLY counts if ncr is NOT null
Â  Â  Â  Â  Â  Â  Â  Â  if (day.ncr !== null) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  teamMembers[tm].ncrTotal += day.ncr;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  teamMembers[tm].ncrDayCount += 1;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  // High/Low day tracking based on WTD
Â  Â  Â  Â  Â  Â  Â  Â  if (day.wtd >= 0.5) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  teamMembers[tm].highDays += 1;
Â  Â  Â  Â  Â  Â  Â  Â  } else if (day.wtd < 0.3) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  teamMembers[tm].lowDays += 1;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  });
});

// Sorting and Display
const sortedTeamMembers = Object.entries(teamMembers).sort(([, a], [, b]) => {
Â  Â  // Logic to calculate average for sorting
Â  Â  const aAvg = a.dayCount > 0 ? a.totalPercent / a.dayCount : 0;
Â  Â  const bAvg = b.dayCount > 0 ? b.totalPercent / b.dayCount : 0;
Â  Â  return bAvg - aAvg;
});

// Clear the container before populating
teamMemberTrendsContainer.innerHTML = '';

sortedTeamMembers.forEach(([tmName, tmData]) => {
Â  Â  const avgPercent = tmData.dayCount > 0 ? (tmData.totalPercent / tmData.dayCount * 100).toFixed(1) : 'N/A';

Â  Â  // Calculate Average NCA - Only divides by days with actual NCA data
Â  Â  const avgNca = tmData.ncrDayCount > 0 ? (tmData.ncrTotal / tmData.ncrDayCount * 100).toFixed(1) : 'N/A';

Â  Â  const ncaColor = avgNca !== 'N/A' && parseFloat(avgNca) >= 70.0 ? 'text-purple-600' : 'text-gray-500';

Â  Â  // CONSISTENCY FIX: Use parseFloat for safer numeric comparison
Â  Â  const isHighFlier = avgPercent !== 'N/A' && parseFloat(avgPercent) >= 50.0;

Â  Â  const tmCardColor = isHighFlier ? 'border-green-500' : 'border-red-500';
Â  Â  const tmIcon = isHighFlier ? 'ðŸŒŸ' : 'ðŸ’¡'; // Star for high-fliers, bulb for focus areas

Â  Â  const tmHTML = `
Â  Â  Â  Â  <div class="section flex items-center p-6 border-l-4 rounded-xl ${tmCardColor} flex-wrap">
Â  Â  Â  Â  Â  Â  <div class="flex-1 w-full sm:w-auto">
Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="text-xl sm:text-2xl font-bold text-gray-700">${tmName}</h4>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm sm:text-base text-gray-600 mt-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Avg. Daily App Adoption: <span class="font-bold text-lg ${isHighFlier ? 'text-green-600' : 'text-red-600'}">${avgPercent}%</span>
Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm sm:text-base text-gray-600 mt-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Avg. New Customer Adoption: <span class="font-bold text-base ${ncaColor}">${avgNca}%</span>
Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-xs sm:text-sm text-gray-500 mt-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${tmData.highDays} high-performing day(s) & ${tmData.lowDays} day(s) that need focus.
Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="w-full sm:w-1/3 flex justify-center mt-4 sm:mt-0">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-4xl sm:text-5xl">${tmIcon}</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  `;
Â  Â  // CRITICAL FIX: Append the generated HTML and close the loop iteration
Â  Â  teamMemberTrendsContainer.innerHTML += tmHTML;
}); // Close sortedTeamMembers.forEach loop

</script>
</body>
</html>
